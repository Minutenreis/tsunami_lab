import matplotlib.pyplot as plt
import numpy as np

# Data for plotting
threads = range(1,73)
times1Static = [34.1963, 22.5628, 15.0145, 12.29, 9.27764, 9.15781, 6.9417, 7.2712, 5.54379, 6.31567, 4.79914, 5.37322, 4.03977, 5.03707, 4.07594, 4.725, 4.1198, 4.1977, 3.99221, 3.93709, 4.27721, 3.75294, 4.04035, 4.07471, 4.20402, 3.52276, 3.75348, 3.64381, 3.54348, 3.96246, 3.44557, 3.17751, 3.26532, 3.02241, 3.89188, 3.56316, 3.88059, 3.58148, 3.711, 3.72611, 3.69902, 3.53333, 3.45341, 3.35592, 3.7532, 3.78971, 3.47188, 3.74699, 3.69682, 3.69558, 3.40065, 3.57311, 3.58509, 3.45186, 3.59196, 3.43525, 3.51705, 3.44009, 3.35659, 3.5886, 3.55952, 3.51142, 3.2369, 3.49928, 3.71425, 3.61493, 3.66501, 3.62783, 3.82914, 3.3439, 3.89864, 5.63512]
times2Static = [32.2386, 21.8238, 14.8981, 11.4078, 9.31997, 8.90487, 6.98744, 7.35236, 5.70788, 6.14843, 4.64647, 5.37629, 4.13333, 5.13619, 4.02305, 4.66247, 4.26155, 4.26434, 4.21845, 4.16134, 3.94634, 4.02624, 4.21941, 4.20128, 3.6914, 3.71855, 3.7698, 3.2957, 4.09418, 3.86007, 3.79782, 3.99887, 4.01925, 3.03142, 3.54268, 3.69717, 3.74882, 3.76925, 3.81368, 3.68777, 3.83242, 3.6404, 3.47791, 3.74965, 3.71128, 3.5645, 3.71398, 3.78103, 3.75276, 3.62194, 3.65746, 3.66005, 3.44778, 3.70048, 3.53042, 3.41126, 3.62641, 3.56435, 3.45482, 3.482, 3.43548, 3.3038, 3.42184, 3.5823, 3.68966, 3.46739, 3.65713, 3.78747, 3.48452, 3.4646, 3.74459, 3.55212]
times3Static = [32.2476, 22.2868, 14.8348, 12.4585, 9.47114, 9.08008, 7.03187, 7.41934, 5.73846, 6.152, 4.79937, 5.63061, 4.181, 4.98204, 4.17434, 4.60824, 4.1076, 4.36289, 4.1124, 4.06333, 4.16607, 4.0802, 3.95091, 4.20127, 4.01824, 4.21908, 3.72493, 4.03774, 3.50971, 3.44758, 3.83697, 3.87306, 3.49316, 3.85882, 3.71238, 3.64674, 3.80798, 3.61855, 3.74494, 3.71256, 3.73043, 3.63936, 3.70434, 3.84439, 3.66189, 3.6461, 3.69234, 3.69189, 3.64249, 3.66959, 3.69052, 3.72129, 3.55346, 3.64347, 3.68322, 3.54685, 3.39622, 3.5392, 3.41577, 3.63172, 3.74794, 3.65099, 3.39428, 3.46129, 3.66911, 3.71363, 3.2911, 3.52364, 3.86736, 3.83112, 3.71757, 6.65353]
timesStatic = [(time1+time2+time3)/3 for time1,time2,time3 in zip(times1Static,times2Static,times3Static)]
times1Dynamic = [32.8484, 52.6335, 37.1783, 30.071, 23.9616, 22.1027, 19.2425, 18.2185, 15.6081, 14.6133, 14.4561, 13.9676, 11.3659, 10.4658, 11.5133, 10.7303, 10.0661, 10.5607, 9.61316, 9.26542, 7.82684, 9.24564, 8.37876, 8.12422, 8.64507, 7.85716, 8.38232, 8.11422, 8.08682, 7.70973, 7.59463, 7.76171, 7.39026, 7.46313, 7.64928, 6.71323, 7.06953, 6.65348, 6.80714, 6.64041, 6.49479, 6.62724, 6.51169, 6.47041, 7.06851, 6.38221, 6.21982, 6.23014, 6.12836, 5.95283, 6.02473, 5.90486, 5.93114, 5.95283, 5.63085, 6.24258, 5.56925, 5.63957, 5.55142, 5.46692, 5.4582, 5.35202, 5.36988, 5.20271, 5.24568, 5.2105, 5.07828, 5.20825, 5.20928, 5.05124, 5.05049, 4.89655]
times2Dynamic = [32.4279, 49.7113, 36.1594, 30.4442, 23.6621, 22.2762, 19.9909, 18.244, 15.5458, 15.666, 14.2848, 13.661, 12.6123, 12.3755, 11.7569, 11.3029, 10.8057, 9.93926, 10.499, 10.0047, 9.60067, 9.32298, 8.84968, 8.91768, 8.11446, 8.49146, 8.38761, 8.17628, 7.98234, 7.83894, 7.69279, 6.92043, 7.31858, 7.52684, 7.06135, 6.80453, 7.13695, 6.58506, 7.02564, 6.71825, 6.73708, 6.73728, 6.43826, 6.42514, 6.30908, 6.42235, 6.2753, 6.30629, 5.98943, 6.32487, 9.37161, 5.83001, 5.8169, 5.81686, 5.89856, 5.6446, 5.85456, 5.68795, 5.64406, 5.54505, 5.58778, 5.35824, 5.38527, 5.24133, 5.6156, 5.08084, 5.19321, 4.99258, 4.93264, 5.0933, 4.85399, 6.28069]
times3Dynamic = [32.2587, 49.1249, 36.7216, 30.7893, 23.7955, 22.1104, 19.8399, 18.144, 15.6695, 15.3527, 14.629, 13.5979, 12.7003, 12.6268, 11.7868, 11.1648, 10.8927, 10.8657, 10.2065, 9.78856, 9.29841, 9.04579, 9.09542, 8.56107, 8.8048, 8.63606, 7.51705, 8.42818, 7.48019, 7.07609, 7.92124, 6.21913, 7.38923, 7.61599, 7.31153, 7.47861, 6.98978, 6.69512, 6.71364, 6.84292, 6.57832, 6.47322, 6.51332, 6.36225, 6.3276, 6.35087, 6.31934, 7.80881, 6.20807, 6.00367, 5.92901, 5.86021, 5.80028, 5.8964, 5.80871, 5.74799, 5.93484, 5.5302, 5.45806, 5.60683, 5.56247, 5.32585, 5.24932, 5.42943, 5.59375, 5.22713, 5.52537, 5.08627, 5.67103, 5.05252, 5.19845, 5.29971]
timesDynamic = [(time1+time2+time3)/3 for time1,time2,time3 in zip(times1Dynamic,times2Dynamic,times3Dynamic)]
Speedup = [timesStatic[0]/time for time in timesStatic]
SpeedupDynamic = [timesStatic[0]/time for time in timesDynamic]
Efficiency = [speedup/thread for speedup,thread in zip(Speedup,threads)]

max = np.argmax(Speedup)
print("Maximum speedup: ", Speedup[max], "with ", threads[max], "threads")

plt.plot(threads, Speedup, 'o-', label='Static')
plt.plot(threads, SpeedupDynamic, 'o-', label="Dynamic")
plt.title('Speedup')
plt.xlabel('Number of threads')
plt.ylabel('Sp')
plt.legend()
ax = plt.gca()
ax.set_ylim(ymin=0)
ax.set_xlim(xmin=0, xmax=72)
plt.savefig('speedup.png')
plt.clf()
plt.plot(threads, Efficiency, 'o-')
plt.title('Efficiency')
plt.xlabel('Number of threads')
plt.ylabel('Sp/p')
ax = plt.gca()
ax.set_ylim(ymin=0,ymax=1)
ax.set_xlim(xmin=0,xmax=72)
plt.savefig('efficiency.png')

