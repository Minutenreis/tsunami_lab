import matplotlib.pyplot as plt
import numpy as np

# Data for plotting
threads = range(1,73)
times1Static = [34.1963, 22.5628, 15.0145, 12.29, 9.27764, 9.15781, 6.9417, 7.2712, 5.54379, 6.31567, 4.79914, 5.37322, 4.03977, 5.03707, 4.07594, 4.725, 4.1198, 4.1977, 3.99221, 3.93709, 4.27721, 3.75294, 4.04035, 4.07471, 4.20402, 3.52276, 3.75348, 3.64381, 3.54348, 3.96246, 3.44557, 3.17751, 3.26532, 3.02241, 3.89188, 3.56316, 3.88059, 3.58148, 3.711, 3.72611, 3.69902, 3.53333, 3.45341, 3.35592, 3.7532, 3.78971, 3.47188, 3.74699, 3.69682, 3.69558, 3.40065, 3.57311, 3.58509, 3.45186, 3.59196, 3.43525, 3.51705, 3.44009, 3.35659, 3.5886, 3.55952, 3.51142, 3.2369, 3.49928, 3.71425, 3.61493, 3.66501, 3.62783, 3.82914, 3.3439, 3.89864, 5.63512]
times2Static = [32.2386, 21.8238, 14.8981, 11.4078, 9.31997, 8.90487, 6.98744, 7.35236, 5.70788, 6.14843, 4.64647, 5.37629, 4.13333, 5.13619, 4.02305, 4.66247, 4.26155, 4.26434, 4.21845, 4.16134, 3.94634, 4.02624, 4.21941, 4.20128, 3.6914, 3.71855, 3.7698, 3.2957, 4.09418, 3.86007, 3.79782, 3.99887, 4.01925, 3.03142, 3.54268, 3.69717, 3.74882, 3.76925, 3.81368, 3.68777, 3.83242, 3.6404, 3.47791, 3.74965, 3.71128, 3.5645, 3.71398, 3.78103, 3.75276, 3.62194, 3.65746, 3.66005, 3.44778, 3.70048, 3.53042, 3.41126, 3.62641, 3.56435, 3.45482, 3.482, 3.43548, 3.3038, 3.42184, 3.5823, 3.68966, 3.46739, 3.65713, 3.78747, 3.48452, 3.4646, 3.74459, 3.55212]
times3Static = [32.2476, 22.2868, 14.8348, 12.4585, 9.47114, 9.08008, 7.03187, 7.41934, 5.73846, 6.152, 4.79937, 5.63061, 4.181, 4.98204, 4.17434, 4.60824, 4.1076, 4.36289, 4.1124, 4.06333, 4.16607, 4.0802, 3.95091, 4.20127, 4.01824, 4.21908, 3.72493, 4.03774, 3.50971, 3.44758, 3.83697, 3.87306, 3.49316, 3.85882, 3.71238, 3.64674, 3.80798, 3.61855, 3.74494, 3.71256, 3.73043, 3.63936, 3.70434, 3.84439, 3.66189, 3.6461, 3.69234, 3.69189, 3.64249, 3.66959, 3.69052, 3.72129, 3.55346, 3.64347, 3.68322, 3.54685, 3.39622, 3.5392, 3.41577, 3.63172, 3.74794, 3.65099, 3.39428, 3.46129, 3.66911, 3.71363, 3.2911, 3.52364, 3.86736, 3.83112, 3.71757, 6.65353]
timesStatic = [(time1+time2+time3)/3 for time1,time2,time3 in zip(times1Static,times2Static,times3Static)]
times1Dynamic = [32.8484, 52.6335, 37.1783, 30.071, 23.9616, 22.1027, 19.2425, 18.2185, 15.6081, 14.6133, 14.4561, 13.9676, 11.3659, 10.4658, 11.5133, 10.7303, 10.0661, 10.5607, 9.61316, 9.26542, 7.82684, 9.24564, 8.37876, 8.12422, 8.64507, 7.85716, 8.38232, 8.11422, 8.08682, 7.70973, 7.59463, 7.76171, 7.39026, 7.46313, 7.64928, 6.71323, 7.06953, 6.65348, 6.80714, 6.64041, 6.49479, 6.62724, 6.51169, 6.47041, 7.06851, 6.38221, 6.21982, 6.23014, 6.12836, 5.95283, 6.02473, 5.90486, 5.93114, 5.95283, 5.63085, 6.24258, 5.56925, 5.63957, 5.55142, 5.46692, 5.4582, 5.35202, 5.36988, 5.20271, 5.24568, 5.2105, 5.07828, 5.20825, 5.20928, 5.05124, 5.05049, 4.89655]
times2Dynamic = [32.4279, 49.7113, 36.1594, 30.4442, 23.6621, 22.2762, 19.9909, 18.244, 15.5458, 15.666, 14.2848, 13.661, 12.6123, 12.3755, 11.7569, 11.3029, 10.8057, 9.93926, 10.499, 10.0047, 9.60067, 9.32298, 8.84968, 8.91768, 8.11446, 8.49146, 8.38761, 8.17628, 7.98234, 7.83894, 7.69279, 6.92043, 7.31858, 7.52684, 7.06135, 6.80453, 7.13695, 6.58506, 7.02564, 6.71825, 6.73708, 6.73728, 6.43826, 6.42514, 6.30908, 6.42235, 6.2753, 6.30629, 5.98943, 6.32487, 9.37161, 5.83001, 5.8169, 5.81686, 5.89856, 5.6446, 5.85456, 5.68795, 5.64406, 5.54505, 5.58778, 5.35824, 5.38527, 5.24133, 5.6156, 5.08084, 5.19321, 4.99258, 4.93264, 5.0933, 4.85399, 6.28069]
times3Dynamic = [32.2587, 49.1249, 36.7216, 30.7893, 23.7955, 22.1104, 19.8399, 18.144, 15.6695, 15.3527, 14.629, 13.5979, 12.7003, 12.6268, 11.7868, 11.1648, 10.8927, 10.8657, 10.2065, 9.78856, 9.29841, 9.04579, 9.09542, 8.56107, 8.8048, 8.63606, 7.51705, 8.42818, 7.48019, 7.07609, 7.92124, 6.21913, 7.38923, 7.61599, 7.31153, 7.47861, 6.98978, 6.69512, 6.71364, 6.84292, 6.57832, 6.47322, 6.51332, 6.36225, 6.3276, 6.35087, 6.31934, 7.80881, 6.20807, 6.00367, 5.92901, 5.86021, 5.80028, 5.8964, 5.80871, 5.74799, 5.93484, 5.5302, 5.45806, 5.60683, 5.56247, 5.32585, 5.24932, 5.42943, 5.59375, 5.22713, 5.52537, 5.08627, 5.67103, 5.05252, 5.19845, 5.29971]
timesDynamic = [(time1+time2+time3)/3 for time1,time2,time3 in zip(times1Dynamic,times2Dynamic,times3Dynamic)]
times1StaticNuma = [33.6972, 22.0721, 15.0282, 12.1709, 9.25962, 8.87557, 6.94593, 7.11662, 5.57668, 6.04679, 4.81386, 5.37966, 4.25649, 4.93476, 4.10945, 4.63646, 4.24054, 4.33483, 4.19797, 4.16133, 4.18737, 4.05768, 3.95412, 3.70869, 4.21711, 3.59456, 4.12534, 4.24823, 4.157, 3.87886, 3.34256, 3.30836, 3.22243, 3.8752, 3.30348, 3.76456, 3.81563, 3.82026, 3.98509, 3.74957, 3.60335, 3.56401, 3.78694, 3.52069, 3.35222, 3.47292, 3.70803, 3.65429, 3.39329, 3.62295, 3.6239, 3.62239, 3.58876, 3.43406, 3.44816, 3.37786, 3.48082, 3.47498, 3.56133, 3.42249, 3.61704, 3.37543, 3.40256, 3.67566, 3.31048, 3.65908, 3.37369, 3.62689, 3.45507, 4.0588, 3.67623, 3.63421]
times2StaticNuma = [32.6721, 22.1668, 14.9585, 12.4613, 9.57264, 9.15334, 7.15852, 7.38384, 5.62478, 6.37936, 4.7486, 5.54541, 4.15796, 4.94482, 3.95428, 4.63347, 4.04983, 4.09304, 4.16087, 3.80661, 4.03128, 3.94934, 4.07561, 4.23444, 4.35493, 3.65324, 3.97939, 3.28138, 3.44004, 3.46529, 3.45343, 3.20426, 3.5228, 3.81069, 3.97944, 3.70402, 4.04518, 3.56841, 3.68616, 3.65113, 3.73139, 3.58866, 3.55049, 3.67787, 3.75042, 3.51053, 3.4831, 3.68131, 3.67406, 3.55924, 3.93346, 3.66292, 3.62054, 3.52915, 3.64733, 3.58568, 3.49449, 3.55422, 3.43371, 3.47539, 3.2466, 3.38684, 3.56844, 3.64151, 3.48952, 3.56467, 3.53602, 3.68136, 3.5274, 3.37953, 3.88261, 3.67405]
times3StaticNuma = [32.3399, 22.0329, 14.7665, 12.5072, 9.29005, 9.04914, 6.79621, 7.01043, 5.9434, 5.8525, 4.6354, 5.43031, 4.15592, 4.63248, 4.45536, 4.39154, 4.41767, 4.36531, 4.19173, 4.0363, 4.27649, 4.05242, 4.09103, 4.10992, 3.41927, 4.03646, 4.12411, 3.95035, 3.67796, 3.50765, 4.08462, 3.32488, 3.25676, 3.79262, 3.61086, 3.64612, 3.65307, 3.45378, 3.85129, 3.57044, 3.85658, 3.71822, 3.60117, 3.72773, 3.83811, 3.66641, 3.80606, 3.57243, 3.56411, 3.56415, 3.69093, 3.9025, 3.55437, 3.53512, 3.75767, 3.65726, 3.40194, 3.45743, 3.42407, 3.46004, 3.45998, 3.50605, 3.78534, 3.33429, 3.94388, 3.68799, 3.41443, 3.61723, 3.28075, 3.47852, 4.10877, 4.24858]
timesStaticNuma = [(time1+time2+time3)/3 for time1,time2,time3 in zip(times1StaticNuma,times2StaticNuma,times3StaticNuma)]
times1Guided = [32.1715, 22.094, 15.3676, 12.214, 10.4865, 9.23644, 8.18211, 7.4288, 7.01284, 6.46638, 6.0776, 5.55324, 5.54063, 5.36963, 5.11762, 4.64729, 4.82984, 4.66708, 4.61413, 4.42894, 4.48669, 4.36601, 4.16126, 4.18252, 4.34946, 4.14808, 4.23431, 4.21625, 4.22687, 4.14274, 4.31488, 4.21833, 4.31556, 4.33067, 4.31988, 4.41258, 4.44376, 4.51204, 4.45277, 4.51862, 4.51352, 4.63112, 4.53153, 4.60336, 4.6089, 4.57976, 4.49097, 4.66233, 4.73587, 4.66716, 4.73098, 4.78145, 4.75845, 5.24675, 4.80367, 4.76609, 4.83504, 4.87565, 4.89425, 4.8521, 4.95462, 4.8591, 4.92983, 4.92768, 4.90138, 5.1357, 5.06219, 4.22639, 4.31805, 4.42778, 4.90276, 6.1635]
times2Guided = [32.5181, 22.4785, 15.2598, 12.4282, 10.5267, 9.27197, 8.14144, 7.52002, 7.08568, 6.39977, 6.07204, 5.4905, 5.47345, 5.36868, 5.16741, 4.94161, 4.61107, 4.67968, 4.61223, 4.59129, 4.52014, 5.42893, 4.36467, 4.35981, 4.33999, 4.24618, 4.29139, 4.11461, 4.07948, 4.30822, 4.21266, 4.24136, 4.2187, 4.28334, 4.30801, 4.31545, 4.29898, 4.44603, 4.38475, 4.5755, 4.60495, 4.5312, 4.51585, 4.48982, 4.62666, 4.70663, 4.64249, 4.70933, 4.55331, 4.72413, 4.73938, 4.70636, 4.74366, 4.75128, 4.75572, 4.7386, 4.75689, 4.77808, 4.84732, 5.38824, 4.88831, 4.88084, 4.9619, 4.94923, 4.99368, 4.98734, 4.90383, 4.45787, 4.26586, 4.34723, 5.01282, 4.28477]
times3Guided = [31.9477, 22.2387, 15.1755, 12.187, 10.3314, 9.23178, 8.16105, 7.38756, 6.86851, 6.39688, 6.16975, 5.76508, 5.58053, 5.2201, 5.06833, 4.95382, 4.80151, 4.66335, 4.49081, 4.35648, 4.42629, 4.47869, 4.25703, 4.20873, 4.15688, 4.34088, 4.16335, 4.27913, 4.27347, 4.2003, 4.13378, 4.18829, 4.37196, 4.36784, 4.30135, 4.25269, 4.39561, 4.40531, 4.56125, 4.52416, 4.50731, 4.48894, 4.59641, 4.6036, 4.64752, 4.64059, 4.63591, 4.65193, 4.78298, 4.70614, 4.63352, 4.70272, 4.92493, 4.72895, 4.83509, 4.99346, 4.83744, 4.80979, 4.99664, 4.99345, 4.80944, 4.90993, 5.04359, 4.96365, 5.0352, 4.89426, 5.02159, 4.27997, 4.7991, 4.31289, 4.26889, 5.00572]
timesGuided = [(time1+time2+time3)/3 for time1,time2,time3 in zip(times1Guided,times2Guided,times3Guided)]
SpeedupStatic = [timesStatic[0]/time for time in timesStatic]
SpeedupDynamic = [timesStatic[0]/time for time in timesDynamic]
SpeedupGuided = [timesStatic[0]/time for time in timesGuided]
SpeedupStaticNuma = [timesStatic[0]/time for time in timesStaticNuma]
Efficiency = [speedup/thread for speedup,thread in zip(SpeedupStatic,threads)]

max = np.argmax(SpeedupStatic)
print("Maximum speedup: ", SpeedupStatic[max], "with ", threads[max], "threads")

plt.plot(threads, SpeedupStatic, 'o-', label='Static')
plt.plot(threads, SpeedupDynamic, 'o-', label="Dynamic")
plt.plot(threads, SpeedupGuided, 'o-', label="Guided")
plt.plot(threads, SpeedupStaticNuma, 'o-', label="StaticNuma")
plt.title('Speedup')
plt.xlabel('Number of threads')
plt.ylabel('Sp')
plt.legend()
ax = plt.gca()
ax.set_ylim(ymin=0)
ax.set_xlim(xmin=0, xmax=72)
plt.savefig('speedup.png')
